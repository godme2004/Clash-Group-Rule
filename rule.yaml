# ===== rule.yaml（只做分流，不分组） =====
rule-providers:
  LocalAreaNetwork:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/LocalAreaNetwork.list
    path: ./ruleset/LocalAreaNetwork.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  UnBan:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/UnBan.list
    path: ./ruleset/UnBan.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  BanAD:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanAD.list
    path: ./ruleset/BanAD.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  BanProgramAD:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanProgramAD.list
    path: ./ruleset/BanProgramAD.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  GoogleFCM:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/GoogleFCM.list
    path: ./ruleset/GoogleFCM.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  GoogleCN:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/GoogleCN.list
    path: ./ruleset/GoogleCN.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  SteamCN:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/SteamCN.list
    path: ./ruleset/SteamCN.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  Microsoft:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Microsoft.list
    path: ./ruleset/Microsoft.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  ai:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/OpenAi.list
    path: ./ruleset/OpenAi.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  Epic:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/Epic.list
    path: ./ruleset/Epic.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  Origin:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/Origin.list
    path: ./ruleset/Origin.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  Sony:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/Sony.list
    path: ./ruleset/Sony.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  Steam:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/Steam.list
    path: ./ruleset/Steam.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  Nintendo:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/Nintendo.list
    path: ./ruleset/Nintendo.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  BilibiliHMT:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/BilibiliHMT.list
    path: ./ruleset/BilibiliHMT.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  Bilibili:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Ruleset/Bilibili.list
    path: ./ruleset/Bilibili.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  ProxyMedia:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ProxyMedia.list
    path: ./ruleset/ProxyMedia.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  ProxyGFWlist:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ProxyGFWlist.list
    path: ./ruleset/ProxyGFWlist.list
    behavior: classical
    interval: 86400
    format: text
    type: http
  ChinaDomain:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ChinaDomain.list
    path: ./ruleset/ChinaDomain.list
    behavior: domain
    interval: 86400
    format: text
    type: http
  ChinaCompanyIp:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/ChinaCompanyIp.list
    path: ./ruleset/ChinaCompanyIp.list
    behavior: ipcidr
    interval: 86400
    format: text
    type: http
  Download:
    url: https://testingcf.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/Download.list
    path: ./ruleset/Download.list
    behavior: classical
    interval: 86400
    format: text
    type: http

rules:
  # ===== 基础规则集（ACL4SSR） =====
  - RULE-SET,LocalAreaNetwork,DIRECT
  - RULE-SET,UnBan,DIRECT
  - RULE-SET,BanAD,REJECT
  - RULE-SET,BanProgramAD,REJECT
  - RULE-SET,GoogleFCM,GLOBAL
  - RULE-SET,GoogleCN,DIRECT

  # ===== 各大游戏平台客户端下载直连，避免节点限速 =====
  - DOMAIN,epicgames-download1.akamaized.net,DIRECT
  - DOMAIN-SUFFIX,ea.com,DIRECT
  - DOMAIN-SUFFIX,battle.net,DIRECT
  - DOMAIN-SUFFIX,blizzard.com,DIRECT
  - DOMAIN-SUFFIX,cdn.ubi.com,DIRECT
  - DOMAIN-SUFFIX,ubisoftconnect.cdn.ubi.com,DIRECT
  - DOMAIN-SUFFIX,rockstargames-com.akamaized.net,DIRECT
  - DOMAIN-SUFFIX,gamedownloads-rockstargames-com.akamaized.net,DIRECT
  - DOMAIN-SUFFIX,epicgames.com,游戏平台

  # ===== Steam 小流量（商店 / 社区）走代理，保证连通性 =====
  - DOMAIN-SUFFIX,store.steampowered.com,GLOBAL
  - DOMAIN-SUFFIX,steamcommunity.com,GLOBAL
  - DOMAIN-SUFFIX,steampowered.com,GLOBAL
  - DOMAIN-SUFFIX,api.steampowered.com,GLOBAL
  - DOMAIN-SUFFIX,help.steampowered.com,GLOBAL
  - DOMAIN-SUFFIX,steamuserimages-a.akamaihd.net,GLOBAL

  # ===== Steam 大流量（CDN / 国服加速域名）直连，加速下载 =====
  - DOMAIN-SUFFIX,steamcontent.com,DIRECT
  - DOMAIN-SUFFIX,steamusercontent.com,DIRECT
  - DOMAIN-SUFFIX,steamcdn-a.akamaihd.net,DIRECT
  - DOMAIN-SUFFIX,steamserver.net,DIRECT
  - DOMAIN-SUFFIX,steamstatic.com,DIRECT
  - DOMAIN,content.steampowered.com,DIRECT
  - DOMAIN,steampipe.steamcontent.tnkjmec.com,DIRECT
  - DOMAIN,st.dl.eccdnx.com,DIRECT
  - DOMAIN,st.dl.bscstorage.net,DIRECT
  - DOMAIN,st.dl.pinyuncloud.com,DIRECT
  - DOMAIN,dl.steam.clngaa.com,DIRECT
  - DOMAIN,dl.steam.ksyna.com,DIRECT
  - DOMAIN,cdn.mileweb.cs.steampowered.com.8686c.com,DIRECT
  - DOMAIN,cdn-ws.content.steamchina.com,DIRECT
  - DOMAIN,cdn-qc.content.steamchina.com,DIRECT
  - DOMAIN,cdn-ali.content.steamchina.com,DIRECT
  - DOMAIN,xz.pphimalayanrt.com,DIRECT
  - DOMAIN,lv.queniujq.cn,DIRECT
  - DOMAIN,csgo.wmsj.cn,DIRECT
  - DOMAIN,dota2.wmsj.cn,DIRECT
  - DOMAIN,wmsjsteam.com,DIRECT
  - DOMAIN,steam.aca5.com,DIRECT
  - DOMAIN,steam.cdntip.com,DIRECT
  - DOMAIN-SUFFIX,steamchina.com,DIRECT
  - DOMAIN-SUFFIX,valvesoftware.com,DIRECT
  # 额外全球 Steam CDN 节点直连
  - DOMAIN,f3b7q2p3.ssl.hwcdn.net,DIRECT
  - DOMAIN,steammobile.akamaized.net,DIRECT
  - DOMAIN,steampipe-kr.akamaized.net,DIRECT
  - DOMAIN,steampipe-partner.akamaized.net,DIRECT

  # ===== Steam IP 段直连（可选增强） =====
  - IP-CIDR,103.10.124.0/24,DIRECT,no-resolve
  - IP-CIDR,103.10.125.0/24,DIRECT,no-resolve
  - IP-CIDR,103.28.54.0/24,DIRECT,no-resolve
  - IP-CIDR,146.66.152.0/24,DIRECT,no-resolve

  # ===== ACL4SSR 规则集：游戏 / 媒体 / 国内分流 =====
  - RULE-SET,SteamCN,DIRECT
  - RULE-SET,Microsoft,微软服务
  - RULE-SET,ai,ai
  - RULE-SET,Epic,游戏平台
  - RULE-SET,Origin,游戏平台
  - RULE-SET,Sony,游戏平台
  - RULE-SET,Steam,游戏平台
  - RULE-SET,Nintendo,游戏平台
  - RULE-SET,BilibiliHMT,哔哩哔哩
  - RULE-SET,Bilibili,哔哩哔哩
  - RULE-SET,ProxyMedia,GLOBAL
  - RULE-SET,ProxyGFWlist,GLOBAL
  - RULE-SET,ChinaDomain,DIRECT
  - RULE-SET,ChinaCompanyIp,DIRECT
  - RULE-SET,Download,DIRECT

  # ===== Twitter / X 走专门 X 分组 =====
  - DOMAIN-SUFFIX,twitter.com,X
  - DOMAIN-SUFFIX,x.com,X
  - DOMAIN-SUFFIX,t.co,X
  - DOMAIN-SUFFIX,twimg.com,X
  - DOMAIN-SUFFIX,api.twitter.com,X
  - DOMAIN-SUFFIX,abs.twimg.com,X
  - DOMAIN-SUFFIX,pbs.twimg.com,X
  - DOMAIN-SUFFIX,wnacg.com,X

  # ===== 常见 AI 关键词走 ai 分组 =====
  - DOMAIN-KEYWORD,copilot,ai
  - DOMAIN-KEYWORD,gemini,ai

  # ===== GeoIP 与兜底策略 =====
  - GEOIP,CN,DIRECT
  - MATCH,漏网之鱼


  - PROCESS-NAME,steam.exe,DIRECT
  - PROCESS-NAME,Steam.exe,DIRECT
  - PROCESS-NAME,com.valvesoftware.android.steam.community,DIRECT
